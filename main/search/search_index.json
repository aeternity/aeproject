{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Quick Start","text":""},{"location":"#requirements","title":"Requirements","text":"<p>In order to have AEproject working you must have installed the following: <pre><code>nodejs &gt;= 14\ndocker\n</code></pre></p> <p>Note: on windows WSL 2 must be used</p>"},{"location":"#install","title":"Install","text":"<pre><code>npm install -g @aeternity/aeproject\n</code></pre>"},{"location":"#init-a-project","title":"Init a project","text":"<pre><code>aeproject init [folder]\n</code></pre> <p>This will create the project scaffold with an example contract including tests as well as a sample deployment script inside the specified folder. If no folder is specified the artifacts will be initialized in the current directory.</p> <p>Further explained in Initialization Documentation.</p>"},{"location":"#running-a-local-environment","title":"Running a local environment","text":"<pre><code>aeproject env\n</code></pre> <p>This will run a local \u00e6ternity network in dev-mode (node, compiler and nginx-proxy).</p> <p>To stop an already spawned local environment use <code>aeproject env --stop</code></p> <p>Further explained in Environment Documentation.</p>"},{"location":"#testing","title":"Testing","text":"<pre><code>aeproject test\n</code></pre> <p>This will run the tests located in <code>./test</code> folder. Further explained in Testing Documentation.</p>"},{"location":"#help","title":"Help","text":"<pre><code>aeproject help\n</code></pre> <p>Run this command to give you all possible commands of <code>aeproject</code> with help and info</p>"},{"location":"#version","title":"Version","text":"<pre><code>aeproject --version\n</code></pre> <p>Running this command will give you the current installed <code>aeproject</code> version</p>"},{"location":"lib/","title":"AEproject Library","text":"<p>Installed automatically with each project initialized with <code>aeproject init</code>, otherwise can be installed using <code>npm i @aeternity/aeproject</code>.</p> <p>Available imports include helper definitions and utils using: <pre><code>const { utils, wallets, networks } = require('@aeternity/aeproject');\n</code></pre></p>"},{"location":"lib/#utils","title":"Utils","text":"<p><pre><code>utils.getContractContent(contractPath);\n</code></pre> Read the contract source from given path, just a wrapper for <code>fs.readFileSync</code> using <code>utf-8</code> encoding.</p> <p><pre><code>utils.getFilesystem(contractPath);\n</code></pre> Add the required filesystem imports for contract from given path, excluding the Sophia provided library imports.</p> <p><pre><code>utils.get(url);\n</code></pre> Promisified zero dependencies http <code>GET</code> request, usually used to control \u00e6ternity node devmode endpoints.</p> <p><pre><code>utils.getSdk();\n</code></pre> Initialize the \u00e6ternity SDK, pre-configured for optimal use in an AEproject project using \u00e6ternity node devmode.</p> <p><pre><code>utils.awaitKeyBlocks(aeSdk, n);\n</code></pre> Create and wait for <code>n</code> number of key-blocks with the \u00e6ternity node devmode, checked using the passed <code>aeSdk</code>.</p> <p><pre><code>utils.createSnapshot(aeSdk);\n</code></pre> Create a snapshot of the current chain state using the \u00e6ternity node devmode, using the passed <code>aeSdk</code>.</p> <p><pre><code>utils.rollbackSnapshot(aeSdk);\n</code></pre> Rollback to the latest snapshot using the \u00e6ternity node devmode, using the passed <code>aeSdk</code>.</p> <p><pre><code>utils.rollbackHeight(aeSdk, height);\n</code></pre> Rollback to the specified height using the \u00e6ternity node devmode, using the passed <code>aeSdk</code>.</p> <p><pre><code>utils.getDefaultAccounts();\n</code></pre> Get the pre-funded default accounts as <code>MemoryAccount</code>, so they can be used natively using the <code>aeSdk</code>.</p>"},{"location":"lib/#wallets","title":"Wallets","text":"<p>List of configured keypairs that are pre-funded using the \u00e6ternity node devmode as provided in AEproject. </p>"},{"location":"lib/#networks","title":"Networks","text":"<p>Exposed URLs for commonly used <code>nodeUrl</code> and <code>compilerUrl</code>, per default local <code>devmode</code> and optionally hosted URLs for <code>mainnet</code> and <code>testnet</code>.</p>"},{"location":"migration-from-3.x.x-to-4.x.x/","title":"Migration from 3.x.x to 4.x.x","text":""},{"location":"migration-from-3.x.x-to-4.x.x/#changes","title":"Changes","text":"<p>AEproject <code>v4.0.0</code> underwent some bigger changes, is now available as official package of the \u00e6ternity organization on NPM and is compatible to the recently published node v6.4.0.</p> <p>Install the new AEproject version <pre><code>npm install -g @aeternity/aeproject\n</code></pre></p>"},{"location":"migration-from-3.x.x-to-4.x.x/#removed-commands","title":"Removed commands","text":"<p>Following commands have been removed and cannot be used anymore. Most of them didn't work properly or aren't used by anyone:</p> <ul> <li><code>aeproject compatibility</code> (discontinued)</li> <li><code>aeproject compile</code><ul> <li>manual compilation isn't needed for use of aeproject, alternatively use the CLI or the SDK programmatically</li> </ul> </li> <li><code>aeproject deploy</code><ul> <li>deployment isn't supported in aeproject anymore, alternatively use the CLI or the SDK programmatically</li> </ul> </li> <li><code>aeproject export</code> (discontinued)</li> <li><code>aeproject tx-inspector</code> <ul> <li>manual tx inspection is moved to the CLI</li> </ul> </li> </ul>"},{"location":"migration-from-3.x.x-to-4.x.x/#updated-commands","title":"Updated commands","text":"<ul> <li><code>aeproject init</code><ul> <li>added the <code>folder</code> argument to create a new folder for the project initialization</li> </ul> </li> </ul>"},{"location":"migration-from-3.x.x-to-4.x.x/#project-structure","title":"Project structure","text":"<p>The latest available node and compiler will always be used with starting the testing environment.</p> <p>Testing is now handled locally in the project using <code>mocha</code> and <code>chai</code> as direct dev dependencies.</p> <p><code>@aeternity/aeproject</code> is added itself as dependency and includes some library-functions that can be used in testing.</p> <pre><code>const { networks, utils, wallets } = require('@aeternity/aeproject');\n</code></pre> <ul> <li><code>networks</code> includes network definitions for local development, testnet and mainnet</li> <li><code>wallets</code> includes example wallets that are prefunded in local development</li> <li><code>utils</code> includes helper functions for testing<ul> <li><code>getFilesystem(source)</code> to get the filesystem definition for a given contract for deployment</li> <li><code>getSdk()</code> get an instance of the SDK for local development<ul> <li>initialized with all prefunded wallets for <code>onAccount</code> to be used calling from different accounts</li> </ul> </li> <li><code>awaitKeyBlocks(aeSdk, number)</code> await a certain number of key-blocks</li> <li><code>createSnapshot(aeSdk)</code> create a snapshot for local testing</li> <li><code>rollbackSnapshot(aeSdk)</code> rollback to previously created snapshot in local testing</li> </ul> </li> </ul>"},{"location":"migration-from-3.x.x-to-4.x.x/#instructions","title":"Instructions","text":"<ol> <li> <p>Upgrade your project     <pre><code>aeproject init --update\n</code></pre></p> <ul> <li>adds new files needed<ul> <li>including new example contract and tests</li> </ul> </li> <li>prompts for files to replaced<ul> <li>docker setup for the node, compiler dev-mode setup should be accepted</li> <li>example contract and example tests should not be accepted if used in your project for testing</li> </ul> </li> <li>automatically installs needed dependencies and removes unnecessary ones</li> </ul> </li> <li> <p>Adapt Testing Setup (compare your tests with <code>test/exampleTest.js</code>) to</p> <ul> <li>include <code>const { assert } = require('chai');</code> for assertions</li> <li>replace <code>NETWORKS</code> import with <code>const { networks } = require('@aeternity/aeproject');</code> for networks definition<ul> <li>local testing network is now <code>devmode</code> instead of <code>local</code></li> </ul> </li> <li>replace <code>defaultWallets</code> import with <code>const { wallets } = require('@aeternity/aeproject');</code> for prefunded wallets</li> <li>replace <code>contractUtils</code> import with <code>const { utils } = require('@aeternity/aeproject');</code> for utils<ul> <li>consider using the new helpers for initializing an instance of the SDK and creating snapshots similar to <code>test/exampleTest.js</code></li> </ul> </li> </ul> </li> </ol>"},{"location":"cli/env/","title":"Local Environment","text":"<pre><code>aeproject env\n</code></pre> <p>The command is responsible for setting up a healthy local environment. The <code>env</code> command helps developers run a local node and a local compiler in dev-mode using docker. To spawn a fully functional environment it can take a couple of minutes depending on your system.</p> <p>If using Windows, WSL 2 needs to be used for AEproject to work normally, see https://docs.microsoft.com/en-us/windows/wsl/tutorials/wsl-containers</p> <p>You can stop both the node and the compiler by running <pre><code>aeproject env --stop\n</code></pre></p> <p>There are optional parameters --nodeVersion and --compilerVersion. To specify a specific version of node or compiler, or both <pre><code>aeproject env --nodeVersion v6.10.0\n# or\naeproject env --compilerVersion v7.4.0\n# or\naeproject env --nodeVersion v6.10.0 --compilerVersion v7.4.0\n</code></pre> This also applies to the commands <code>aeproject node</code> and <code>aeproject compiler</code>.</p> <p>To see whether you have running instances of the nodes along with a compiler you could run the following command <pre><code>aeproject env --info\n</code></pre></p> <p>Note: By default AEproject uses the <code>latest-bundle</code> tag of the official docker images.</p> <p>Compatibility: AEproject uses <code>@aeternity/aepp-sdk@13</code> which is only compatible using <code>node &gt;= v6</code> and <code>compiler &gt;= v7</code>, the only tested and recommended configuration, which also works on ARM64/Apple Silicon is from images <code>node v6.8.1</code> and <code>compiler v7.3.0</code>, upcoming newer versions with the same major version should work without issues.</p>"},{"location":"cli/env/#disclaimer","title":"Disclaimer","text":"<ul> <li>Firewalls and any other security feature can block your docker/docker-compose requests. Please check that docker/docker-compose is NOT in its blocked list or has permission to make requests.</li> </ul>"},{"location":"cli/init/","title":"Project Initialization","text":"<pre><code>aeproject init [folder]\n</code></pre> <p>Optionally a <code>folder</code> can be specified for the project to be initialized in, otherwise the current directory is used.</p> <p>Creates a new project structure with a few folders in which the developer can create contracts and tests, as well as installing needed dependencies.</p>"},{"location":"cli/init/#update-existing-project","title":"Update existing project","text":"<p>For upgrade from old AEproject versions check out Migration from 3.x.x to 4.x.x.</p> <pre><code>aeproject init --update\n</code></pre> <p>Updates the project structure and needed artifacts to the latest version, as well as installing needed dependencies.</p>"},{"location":"cli/test/","title":"Unit Testing","text":""},{"location":"cli/test/#run-unit-tests","title":"Run unit tests","text":"<pre><code>aeproject test\n</code></pre> <p>The <code>test</code> command helps developers run their unit tests for \u00e6ternity projects. The command executes the tests scripts that are located in the test folder of your \u00e6ternity project. </p>"},{"location":"cli/test/#implement-unit-tests","title":"Implement unit tests","text":"<p>In the <code>test/exampleTest.js</code> file you can find an example for unit testing using AEproject.</p>"},{"location":"cli/test/#1-dependencies","title":"1. Dependencies","text":"<p>Javascript testing framework used with mocha for assertions, documented at https://www.chaijs.com/api/assert/</p> <pre><code>const { assert } = require('chai');\n</code></pre> <p>Helper and utilities for AEproject use, e.g. prefunded wallets, network definition and utility functions for SDK initialization and snapshotting.</p> <pre><code>const { networks, utils, wallets } = require('@aeternity/aeproject');\n</code></pre> <p>Read AEproject Library for a more detailed explanation about the usage of these imports.</p>"},{"location":"cli/test/#2-sdk-and-snapshotting-setup","title":"2. SDK and Snapshotting Setup","text":"<p>Provide your initializations in mocha which need to be done once before all tests: <pre><code>before(async () =&gt; ...)\n</code></pre></p> <p>Initialize the default SDK instance with provided utils: <pre><code>aeSdk = await utils.getSdk();\n</code></pre></p> <p>Get the filesystem definition for (custom) <code>includes</code> of the given contract: <pre><code>const filesystem = utils.getFilesystem(EXAMPLE_CONTRACT_SOURCE);\n</code></pre></p> <p>Read the contract source from the filesystem: <pre><code>const sourceCode = utils.getContractContent(EXAMPLE_CONTRACT_SOURCE);\n</code></pre></p> <p>Initialize the contract instance: <pre><code>contract = await aeSdk.initializeContract({ sourceCode, filesystem });\n</code></pre></p> <p>Deploy the contract: <pre><code>await contract.init();\n</code></pre></p> <p>Create a snapshot of the chain state once before all tests. This allows you to rollback to a clean state after each test if needed: <pre><code>await utils.createSnapshot(aeSdk);\n</code></pre></p> <p>Rollback to the previously created snapshot after each test for a clean state in the following tests: <pre><code>afterEach(async () =&gt; {\nawait utils.rollbackSnapshot(aeSdk);\n});\n</code></pre></p>"},{"location":"cli/test/#3-example-test","title":"3. Example Test","text":"<pre><code>it('ExampleContract: set and get', async () =&gt; {\nconst set = await contract.set(42, {onAccount: utils.getDefaultAccounts()[1]});\nassert.equal(set.decodedEvents[0].name, 'SetXEvent');\nassert.equal(set.decodedEvents[0].args[0], utils.getDefaultAccounts()[1].address);\nassert.equal(set.decodedEvents[0].args[1], 42);\n\nconst {decodedResult} = await contract.get();\nassert.equal(decodedResult, 42);\n});\n</code></pre> <p>Use mocha for test setup and chai for <code>assert</code>. Then implement contract usage using the aeternity sdk as explained in the guide at https://github.com/aeternity/aepp-sdk-js/blob/develop/docs/guides/contracts.md#5-call-contract-entrypoints</p>"}]}